# *******************************************************************************************
# *******************************************************************************************
#
#		Name : 		Makefile
#		Purpose :	Make tables for polynomial module
#		Date :		13th November 2024
#		Author : 	Paul Robson (paul@robsons.org.uk)
#
# *******************************************************************************************
# *******************************************************************************************

include ../../build_env/common.make

all: 
	#
	#		Copy the coefficients from the reference implementation
	#
	cp $(ROOTDIR)documents/ifloat-reference/coefficients.acme active/_coefficients.asm
	#
	#		Generate the table of floats
	#
	echo "; this file is automatically generated" >active/_constants.asm
	$(PYTHON) $(SCRIPTDIR)generate_ifloat.py FloatConst_1Div2Pi 	"1/(2*math.pi)" 		>>active/_constants.asm
	$(PYTHON) $(SCRIPTDIR)generate_ifloat.py FloatConst_PiDiv2 		"math.pi/2" 			>>active/_constants.asm
	$(PYTHON) $(SCRIPTDIR)generate_ifloat.py FloatConst_Log2 		"math.log(2)" 			>>active/_constants.asm
	$(PYTHON) $(SCRIPTDIR)generate_ifloat.py FloatConst_Log2_E 		"math.log(math.e,2)" 	>>active/_constants.asm
